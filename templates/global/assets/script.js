"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,n,i){return n&&_defineProperties(e.prototype,n),i&&_defineProperties(e,i),e}var WP=function(){function n(e){_classCallCheck(this,n),this.element=e,this.element.hasClass("wponion-settings")&&(this.settings_menu_handler(),this.settings_init_search_input()),this.element.hasClass("wponion-metabox")&&this.element.hasClass("wponion-wp-theme")&&this.metabox_menu_handler(),this.element.hasClass("wponion-metabox")&&this.element.hasClass("wponion-wc-theme")&&this.metabox_menu_handler()}return _createClass(n,[{key:"metabox_menu_handler",value:function(){this.settings_main_menu(),this.settings_submenu()}},{key:"settings_menu_handler",value:function(){this.settings_main_menu(),this.settings_submenu()}},{key:"settings_main_menu",value:function(){var t=this,e=this.element.hasClass("wponion-wc-theme")?".main-navigation nav a":".main-navigation .nav-tab-wrapper a";this.element.find(e).on("click",function(e){e.preventDefault();var n=jQuery(e.currentTarget),i=window.wponion.helper.url_params(n.attr("href"));if(!1===window.wponion._.isUndefined(i["container-id"])){var a=t.element.find("div#wponion-tab-"+i["container-id"]);0<a.length?(t.element.parent().find('input[name="container-id"]').val(i["container-id"]),t.element.find(".wponion-container-wraps").hide(),a.show(),t.element.hasClass("wponion-wc-theme")?(t.element.find("nav a.wpo-tab-active").removeClass("wpo-tab-active"),n.addClass("wpo-tab-active")):(t.element.find("nav.nav-tab-wrapper a.nav-tab-active").removeClass("nav-tab-active"),n.addClass("nav-tab-active")),0===a.find(".wponion-submenus a.current").length?a.find(".wponion-submenus li:first-child a").click():a.find(".wponion-submenus a.current").click()):!1===n.hasClass("disabled")&&(window.location.href=n.attr("href"))}else!1===n.hasClass("disabled")&&(window.location.href=n.attr("href"))})}},{key:"settings_submenu",value:function(){var o=this;this.element.find(".wponion-submenus a").on("click",function(e){e.preventDefault();var n=jQuery(e.currentTarget),i=window.wponion.helper.url_params(n.attr("href"));if(!1===window.wponion._.isUndefined(i["container-id"])){var a=o.element.find("div#wponion-tab-"+i["container-id"]);if(0<a.length)if(!1===window.wponion._.isUndefined(i["sub-container-id"])){var t=a.find("div#wponion-tab-"+i["container-id"]+"-"+i["sub-container-id"]);if(0<t.length){var s=o.element.parent();s.find('input[name="container-id"]').val(i["container-id"]),s.find('input[name="sub-container-id"]').val(i["sub-container-id"]),o.element.find("div#wponion-tab-"+i["container-id"]+" .wponion-sub-container-wraps ").hide(),t.show(),a.find(".wponion-submenus a.current").removeClass("current"),n.addClass("current")}else!1===n.hasClass("disabled")&&(window.location.href=n.attr("href"))}else!1===n.hasClass("disabled")&&(window.location.href=n.attr("href"));else!1===n.hasClass("disabled")&&(window.location.href=n.attr("href"))}else!1===n.hasClass("disabled")&&(window.location.href=n.attr("href"))})}},{key:"settings_init_search_input",value:function(){var t=this;this.element.find(".action-search").find("input").on("change keyup",function(e){var a=jQuery(e.currentTarget).val(),n=t.element.find(".wponion-container-wraps");t.element.find(".search-no-result").hide(),3<a.length?(t.element.find(".wponion-submenus").addClass("wponion-search-unmatched"),t.element.find(".content-outer-wrap").addClass("full-width"),n.addClass("wponion-search-matched"),t.element.find(".wponion-has-callback").addClass("wponion-search-unmatched"),t.element.find(".wponion-has-callback").removeClass("wponion-search-matched"),n.each(function(e,n){(n=jQuery(n)).find("> .wponion-element").addClass("wponion-search-unmatched"),n.find("> .wponion-element").removeClass("wponion-search-matched"),n.find("> .wponion-element").each(function(e,i){(i=jQuery(i)).find(".wponion-element-title > h4, .wponion-desc").each(function(e,n){t.settings_is_search_matched(jQuery(n),a)&&(i.addClass("wponion-search-matched"),i.removeClass("wponion-search-unmatched"))})})}),0===t.element.find(".wponion-element:visible").length&&t.element.find(".search-no-result").show()):(t.element.find(".search-no-result").hide(),t.element.find(".wponion-search-unmatched").removeClass("wponion-search-unmatched"),t.element.find(".wponion-search-matched").removeClass("wponion-search-matched"),t.element.find(".content-outer-wrap").removeClass("full-width"))})}},{key:"settings_is_search_matched",value:function(e,n){return e.text().match(new RegExp(".*?"+n+".*?","i"))}}]),n}();window.wponion.hooks.addAction("wponion_theme_init","wponion_core",function(e){(e.hasClass("wponion-wp-theme")||e.hasClass("wponion-wp_lite-theme")||e.hasClass("wponion-wc-theme"))&&new WP(e)});