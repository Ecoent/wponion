"use strict";!function(a){a.fn.WPOnionCloner=function(e){var n=a.extend({limit:!1,add_btn:!1,remove_btn:!1,clone_elem:!1,template:!1,sortable:!1,onLimitReached:!1,templateBeforeRender:!1,templateAfterRender:!1,onRemove:!1},e);"string"==typeof n.add_btn&&(n.add_btn=this.find(n.add_btn)),"string"==typeof n.remove_btn&&(n.remove_btn_jquery=this.find(n.remove_btn));var o=a(this),t=n.add_btn,r=n.remove_btn_jquery,i=function(){if(!a(this).hasClass("removing")){a(this).addClass("removing");var e=parseInt(o.attr("data-wponion-clone-count"))-1;o.attr("data-wponion-clone-count",e),!1!==n.onRemove&&n.onRemove(a(this))}};r.on("click",i),t.on("click",function(){var e=parseInt(o.attr("data-wponion-clone-count")),t=JSON.parse(JSON.stringify(n.template));if(!1!==n.limit&&e===n.limit)return!1!==n.onLimitReached&&n.onLimitReached(),!1;e+=1,o.attr("data-wponion-clone-count",e),t=t.replace(/{wponionCloneID}/g,e),!1!==n.templateBeforeRender&&(t=n.templateBeforeRender(t,e,this)),o.append(a(t)),!1!==n.templateAfterRender&&(t=n.templateAfterRender(o)),o.find(n.remove_btn).on("click",i)}),!1!==n.sortable&&o.sortable(a.extend({cursor:"move",axis:"y",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65},n.sortable))}}(jQuery);