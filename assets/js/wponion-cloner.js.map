{"version":3,"sources":["..\\..\\src\\js\\wponion-cloner.js"],"names":["$","fn","WPOnionCloner","options","$options","extend","limit","add_btn","remove_btn","clone_elem","template","sortable","onLimitReached","templateBeforeRender","templateAfterRender","onRemove","find","$_wrap","$add","$remove","$removeFunc","hasClass","addClass","$count","parseInt","attr","on","$limit","$template","JSON","parse","stringify","replace","append","$_remove","cursor","axis","scrollSensitivity","forcePlaceholderSize","helper","opacity","jQuery"],"mappings":"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","sourcesContent":["( ( $ ) => {\r\n\r\n\t$.fn.WPOnionCloner = function ( options ) {\r\n\t\tlet $options = $.extend( {\r\n\t\t\tlimit: false,\r\n\t\t\tadd_btn: false,\r\n\t\t\tremove_btn: false,\r\n\t\t\tclone_elem: false,\r\n\t\t\ttemplate: false,\r\n\t\t\tsortable: false,\r\n\t\t\tonLimitReached: false,\r\n\t\t\ttemplateBeforeRender: false,\r\n\t\t\ttemplateAfterRender: false,\r\n\t\t\tonRemove: false,\r\n\t\t}, options );\r\n\r\n\t\tif ( typeof $options[ 'add_btn' ] === 'string' ) {\r\n\t\t\t$options[ 'add_btn' ] = this.find( $options[ 'add_btn' ] );\r\n\t\t}\r\n\r\n\t\tif ( typeof $options[ 'remove_btn' ] === 'string' ) {\r\n\t\t\t$options[ 'remove_btn_jquery' ] = this.find( $options[ 'remove_btn' ] );\r\n\t\t}\r\n\r\n\t\tlet $_wrap      = $( this ),\r\n\t\t\t$add        = $options[ 'add_btn' ],\r\n\t\t\t$remove     = $options[ 'remove_btn_jquery' ],\r\n\t\t\t$removeFunc = function () {\r\n\t\t\t\tif ( $( this ).hasClass( 'removing' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$( this ).addClass( 'removing' );\r\n\r\n\t\t\t\tlet $count = parseInt( $_wrap.attr( 'data-wponion-clone-count' ) ) - 1;\r\n\t\t\t\t$_wrap.attr( 'data-wponion-clone-count', $count );\r\n\r\n\t\t\t\tif ( false !== $options[ 'onRemove' ] ) {\r\n\t\t\t\t\t$options[ 'onRemove' ]( $( this ) );\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t$remove.on( 'click', $removeFunc );\r\n\r\n\t\t$add.on( 'click', function () {\r\n\t\t\tlet $limit    = parseInt( $_wrap.attr( 'data-wponion-clone-count' ) ),\r\n\t\t\t\t$template = JSON.parse( JSON.stringify( $options[ 'template' ] ) );\r\n\r\n\t\t\tif ( false !== $options[ 'limit' ] ) {\r\n\t\t\t\tif ( $limit === $options[ 'limit' ] ) {\r\n\t\t\t\t\tif ( false !== $options[ 'onLimitReached' ] ) {\r\n\t\t\t\t\t\t$options[ 'onLimitReached' ]();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$limit = $limit + 1;\r\n\t\t\t$_wrap.attr( 'data-wponion-clone-count', $limit );\r\n\t\t\t$template = $template.replace( /{wponionCloneID}/g, $limit );\r\n\r\n\t\t\tif ( false !== $options[ 'templateBeforeRender' ] ) {\r\n\t\t\t\t$template = $options[ 'templateBeforeRender' ]( $template, $limit, this );\r\n\t\t\t}\r\n\r\n\t\t\t$_wrap.append( $( $template ) );\r\n\r\n\t\t\tif ( false !== $options[ 'templateAfterRender' ] ) {\r\n\t\t\t\t$template = $options[ 'templateAfterRender' ]( $_wrap );\r\n\t\t\t}\r\n\r\n\t\t\tlet $_remove = $_wrap.find( $options[ 'remove_btn' ] );\r\n\t\t\t$_remove.on( 'click', $removeFunc );\r\n\t\t} );\r\n\r\n\t\tif ( $options[ 'sortable' ] !== false ) {\r\n\t\t\t$_wrap.sortable( $.extend( {\r\n\t\t\t\tcursor: 'move',\r\n\t\t\t\taxis: 'y',\r\n\t\t\t\tscrollSensitivity: 40,\r\n\t\t\t\tforcePlaceholderSize: true,\r\n\t\t\t\thelper: 'clone',\r\n\t\t\t\topacity: 0.65,\r\n\t\t\t}, $options[ 'sortable' ] ) )\r\n\t\t}\r\n\t}\r\n\r\n} )( jQuery );"]}