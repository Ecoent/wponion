"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(n,e,u,f,i,o){var t=wp.hooks;i.fn.inputmask=function(){if(0<this.elem.length){var n=this.arg("inputmask");n&&(this.elem.inputmask(n),f.__plugin_debug_info(this.elem,"inputmask",n))}return this},i.fn.maxlength=function(){if(0<this.elem.length){var n=this.arg("max_length");n&&(n.appendToParent=!0,void 0!==n.threshold&&(n.threshold=parseInt(n.threshold)),void 0===n.warningClass&&(n.warningClass="badge badge-success"),void 0===n.limitReachedClass&&(n.limitReachedClass="badge badge-danger"),this.elem.maxlength(n),f.__plugin_debug_info(this.elem,"max_length",n))}return this},i.fn.field_debug=function(){0<this.elem.find(".wponion-field-debug").length&&this.elem.find(".wponion-field-debug a.wponion-field-debug-handle").on("click",function(){var e=f._get_debug_info(u(this),{}),n=f.field_js_id(u(this))+"debugINFO",i="<p class='wponion-field-debug-notice'>"+f.settings("debug_notice")+"</p>",o=u("<div id='"+n+"' class='wponion-field-debug-popup' ><div id='"+n+"' ></div> "+i+"</div>");swal({html:o,showConfirmButton:!0,confirmButtonText:f.txt("get_json_output","Get JSON Output"),showCloseButton:!1,width:"800px",onOpen:function(){u("#swal2-content > div > #"+n).jsonView(e).overlayScrollbars({className:"os-theme-dark",resize:"vertical"})}}).then(function(n){n.value&&swal({width:"600px",html:'<textarea style="min-width:550px; min-height:300px">'+JSON.stringify(e)+"</textarea>"})})});return this},i.fn.icon_picker=function(){var n=this,e=n.elem,i=n.args(),o=e.find(".wponion-icon-picker-input"),t=e.find("button.wponion-remove-icon"),l=e.find("button.wponion-add-icon"),a=e.find("span.wponion-icon-preview"),s={elems:null,popup:null,popupel:null,init_tooltip:function(){if("false"!==i.popup_tooltip){var n="object"===_typeof(i.popup_tooltip)?i.popup_tooltip:{};0<s.elems.length&&s.elems.each(function(){tippy(u(this)[0],n)})}},init:function(n,e){s.popupel=n,s.popup=e,s.elems=s.popupel.find("span.wponion-icon-preview");var i=s.popupel.find(".wponion-icon-picker-container-scroll").css("height");s.popupel.find(".wponion-icon-picker-container-scroll").css("height",i),s.select(),s.input(),s.elems.on("click",function(){var n=u(this).attr("data-icon");o.val(n).trigger("change"),swal.closeModal()}),s.init_tooltip()},input:function(){s.popupel.find("div.wponion-icon-picker-model-header input[type=text]").on("keyup",function(){var n=u(this).val();s.elems.each(function(){u(this).attr("data-icon").search(new RegExp(n,"i"))<0?u(this).parent().hide():u(this).parent().show()})})},select:function(){s.popupel.find("div.wponion-icon-picker-model-header select").on("change",function(){swal.enableLoading();var n=u(this).val();f.ajax("icon_picker",{data:{"wponion-icon-lib":n}},function(n){n.success?(swal.resetValidationError(),u(s.popupel).find("#swal2-content").html(n.data).show(),u(s.popupel).find("#swal2-content .wponion-icon-picker-container-scroll").overlayScrollbars({className:"os-theme-dark",resize:"vertical"}),s.init(s.popupel,s.popup)):(u(s.popupel).find(".wponion-icon-picker-container-scroll").remove(),s.popup.showValidationError(n.data))},function(){s.popup.showValidationError(f.txt("unknown_ajax_error"))},function(){s.popup.disableLoading()})})}};""===o.val()&&(t.hide(),a.hide()),o.on("keyup blur change keypress",function(){var n=u(this).val();""!==n?(a.html('<i class="'+n+'"></i>').show(),t.show()):(a.hide(),t.hide())}),l.on("click",function(){var o=swal({title:e.find(".wponion-field-title h4").html(),animation:!1,allowOutsideClick:!1,showConfirmButton:!1,showCloseButton:!0,width:"700px",customClass:"wponion-icon-picker-model",onBeforeOpen:function(i){swal.enableLoading(),n.ajax("icon_picker",{onSuccess:function(n){if(n.success){swal.resetValidationError();var e=u(i);e.find("#swal2-content").html(n.data).show(),e.find("#swal2-content .wponion-icon-picker-container-scroll").overlayScrollbars({className:"os-theme-dark",resize:"vertical"}),s.init(e,o)}else f.tost({type:"error",title:n.data}),o.showValidationError(n.data)},onError:function(){o.showValidationError(f.txt("unknown_ajax_error"))},onAlways:function(){o.disableLoading()}})}})}),t.on("click",function(){o.val(""),a.hide(),t.hide()})},i.fn.select2=function(){var n=this.arg("select2",{});this.elem.select2(n)},i.fn.chosen=function(){var n=this.arg("chosen");this.elem.chosen(n)},i.fn.selectize=function(){var n=this.arg("selectize");void 0!==n.theme&&this.elem.parent().addClass(n.theme),this.elem.selectize(n)},i.fn.clone_element=function(){var l=this,a=l.elem.find("div.wponion-clone-wrap"),s=a.find(".wponion-clone-add"),n=a.find(".wponion-clone-remove"),e=l.arg("clone"),r=void 0!==e.limit&&e.limit,p=void 0===e.toast_error||e.toast_error,c=e.error_msg,d=function(){if(!u(this).hasClass("removing")){u(this).addClass("removing").parent().parent().remove();var n=parseInt(a.attr("data-wponion-clone-count"))-1;a.attr("data-wponion-clone-count",n)}};s.on("click",function(){var n=l.arg("clone_template"),e=parseInt(a.attr("data-wponion-clone-count"));if(!1===r||r!==e){var i=e+1;if(n){n=n.replace(/{cloneid}/g,i),a.attr("data-wponion-clone-count",i),u(this).parent().parent().find("div.wponion-clone-actions").before(u(n));var o=u(this).parent().parent().before();o.find(".wponion-clone-remove").on("click",d),wponion_field(o).reload()}}else if(!0===p)f.tost({type:"error",title:c});else{var t=u('<div class="alert alert-warning" role="alert">'+c+"</div>");t.hide(),s.parent().prepend(t),(t=s.parent().find("div.alert")).fadeIn(function(){setTimeout(function(){t.fadeOut("slow",function(){t.remove()})},1e3)})}}),n.on("click",d)},i.fn.reload=function(){t.addAction("wponion_before_fields_reload"),this.init_field("input[data-wponion-inputmask]","inputmask"),this.init_field("[data-wponion-maxlength]","maxlength"),this.init_field(".wponion-element-icon_picker","icon_picker"),this.init_field(".select2","select2"),this.init_field(".chosen","chosen"),this.init_field(".selectize","selectize"),this.init_field(".wponion-element-clone","clone_element"),this.field_debug(),t.addAction("wponion_after_fields_reload")},t.addAction("wponion_before_init",function(){wponion_field(".wponion-framework").reload()})}(window,document,jQuery,$wponion,$wponion_field);