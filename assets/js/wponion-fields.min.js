"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};!function(i,n,p,c,e,o){var t=wp.hooks;e.fn.inputmask=function(){if(0<this.elem.length){var i=this.arg("inputmask");i&&(this.elem.inputmask(i),c.__plugin_debug_info(this.elem,"inputmask",i))}return this},e.fn.maxlength=function(){if(0<this.elem.length){var i=this.arg("max_length");i&&(i.appendToParent=!0,void 0!==i.threshold&&(i.threshold=parseInt(i.threshold)),void 0===i.warningClass&&(i.warningClass="badge badge-success"),void 0===i.limitReachedClass&&(i.limitReachedClass="badge badge-danger"),this.elem.maxlength(i),c.__plugin_debug_info(this.elem,"max_length",i))}return this},e.fn.field_debug=function(){0<this.elem.find(".wponion-field-debug").length&&this.elem.find(".wponion-field-debug a.wponion-field-debug-handle").on("click",function(){var n=c._get_debug_info(p(this),{}),i=c.field_js_id(p(this))+"debugINFO",e="<p class='wponion-field-debug-notice'>"+c.settings("debug_notice")+"</p>",o=p("<div id='"+i+"' class='wponion-field-debug-popup' ><div id='"+i+"' ></div> "+e+"</div>");swal({html:o,showConfirmButton:!0,confirmButtonText:c.txt("get_json_output","Get JSON Output"),showCloseButton:!1,width:"800px",onOpen:function(){p("#swal2-content > div > #"+i).jsonView(n).overlayScrollbars({className:"os-theme-dark",resize:"vertical"})}}).then(function(i){i.value&&swal({width:"600px",html:'<textarea style="min-width:550px; min-height:300px">'+JSON.stringify(n)+"</textarea>"})})});return this},e.fn.icon_picker=function(){var i=this,n=i.elem,e=i.args(),o=n.find(".wponion-icon-picker-input"),t=n.find("button.wponion-remove-icon"),l=n.find("button.wponion-add-icon"),a=n.find("span.wponion-icon-preview"),s={elems:null,popup:null,popupel:null,init_tooltip:function(){if("false"!==e.popup_tooltip){var i="object"===_typeof(e.popup_tooltip)?e.popup_tooltip:{};0<s.elems.length&&s.elems.each(function(){tippy(p(this)[0],i)})}},init:function(i,n){s.popupel=i,s.popup=n,s.elems=s.popupel.find("span.wponion-icon-preview");var e=s.popupel.find(".wponion-icon-picker-container-scroll").css("height");s.popupel.find(".wponion-icon-picker-container-scroll").css("height",e),s.select(),s.input(),s.elems.on("click",function(){var i=p(this).attr("data-icon");o.val(i).trigger("change"),swal.closeModal()}),s.init_tooltip()},input:function(){s.popupel.find("div.wponion-icon-picker-model-header input[type=text]").on("keyup",function(){var i=p(this).val();s.elems.each(function(){p(this).attr("data-icon").search(new RegExp(i,"i"))<0?p(this).parent().hide():p(this).parent().show()})})},select:function(){s.popupel.find("div.wponion-icon-picker-model-header select").on("change",function(){swal.enableLoading();var i=p(this).val();c.ajax("icon_picker",{data:{"wponion-icon-lib":i}},function(i){i.success?(swal.resetValidationError(),p(s.popupel).find("#swal2-content").html(i.data).show(),p(s.popupel).find("#swal2-content .wponion-icon-picker-container-scroll").overlayScrollbars({className:"os-theme-dark",resize:"vertical"}),s.init()):(p(s.popupel).find(".wponion-icon-picker-container-scroll").remove(),s.popup.showValidationError(i.data))},function(){s.popup.showValidationError(c.txt("unknown_ajax_error"))},function(){s.popup.disableLoading()})})}};""===o.val()&&(t.hide(),a.hide()),o.on("keyup blur change keypress",function(){var i=p(this).val();""!==i?(a.html('<i class="'+i+'"></i>').show(),t.show()):(a.hide(),t.hide())}),l.on("click",function(){var o=swal({title:n.find(".wponion-field-title h4").html(),animation:!1,allowOutsideClick:!1,showConfirmButton:!1,showCloseButton:!0,width:"700px",customClass:"wponion-icon-picker-model",onBeforeOpen:function(e){swal.enableLoading(),i.ajax("icon_picker",{onSuccess:function(i){if(i.success){swal.resetValidationError();var n=p(e);n.find("#swal2-content").html(i.data).show(),n.find("#swal2-content .wponion-icon-picker-container-scroll").overlayScrollbars({className:"os-theme-dark",resize:"vertical"}),s.init(n,o)}else c.tost({type:"error",title:i.data}),o.showValidationError(i.data)},onError:function(){o.showValidationError(c.txt("unknown_ajax_error"))},onAlways:function(){o.disableLoading()}})}})}),t.on("click",function(){o.val(""),a.hide(),t.hide()})},e.fn.select2=function(){var i=this.arg("select2",{});this.elem.select2(i)},e.fn.chosen=function(){var i=this.arg("chosen");this.elem.chosen(i)},e.fn.selectize=function(){var i=this.arg("selectize");void 0!==i.theme&&this.elem.parent().addClass(i.theme),this.elem.selectize(i)},e.fn.reload=function(){t.addAction("wponion_before_fields_reload"),this.init_field("input[data-wponion-inputmask]","inputmask"),this.init_field("[data-wponion-maxlength]","maxlength"),this.init_field(".wponion-element-icon_picker","icon_picker"),this.init_field(".select2","select2"),this.init_field(".chosen","chosen"),this.init_field(".selectize","selectize"),this.field_debug(),t.addAction("wponion_after_fields_reload")},t.addAction("wponion_before_init",function(){wponion_field(".wponion-framework").reload()})}(window,document,jQuery,$wponion,$wponion_field);