"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(n,i,p,r,o){var e=r._field(),t=e.fn,a=o.hooks;t.inputmask=function(){if(0<this.elem.length){var n=this.arg("inputmask");n&&(this.elem.inputmask(n),r.__plugin_debug_info(this.elem,"inputmask",n))}return this},t.maxlength=function(){if(0<this.elem.length){var n=this.arg("max_length");n&&(n.appendToParent=!0,void 0!==n.threshold&&(n.threshold=parseInt(n.threshold)),void 0===n.warningClass&&(n.warningClass="badge badge-success"),void 0===n.limitReachedClass&&(n.limitReachedClass="badge badge-danger"),this.elem.maxlength(n),r.__plugin_debug_info(this.elem,"max_length",n))}return this},t.field_debug=function(){0<this.elem.find(".wponion-field-debug").length&&this.elem.find(".wponion-field-debug a.wponion-field-debug-handle").on("click",function(){var i=r._get_debug_info(p(this),{}),n=r.field_js_id(p(this))+"debugINFO",o="<p class='wponion-field-debug-notice'>"+r.settings("debug_notice")+"</p>",e=p("<div id='"+n+"' class='wponion-field-debug-popup' ><div id='"+n+"' ></div> "+o+"</div>");swal({html:e,showConfirmButton:!0,confirmButtonText:r.txt("get_json_output","Get JSON Output"),showCloseButton:!1,width:"800px",onOpen:function(){p("#swal2-content > div > #"+n).jsonView(i).overlayScrollbars({className:"os-theme-dark",resize:"vertical"})}}).then(function(n){n.value&&swal({width:"600px",html:'<textarea style="min-width:550px; min-height:300px">'+JSON.stringify(i)+"</textarea>"})})});return this},t.icon_picker=function(){var n=this,i=n.elem,o=n.args(),e=i.find(".wponion-icon-picker-input"),t=i.find("button.wponion-remove-icon"),a=i.find("button.wponion-add-icon"),l=i.find("span.wponion-icon-preview"),s={elems:null,popup:null,popupel:null,init_tooltip:function(){if("false"!==o.popup_tooltip){var n="object"===_typeof(o.popup_tooltip)?o.popup_tooltip:{};0<s.elems.length&&s.elems.each(function(){tippy(p(this)[0],n)})}},init:function(n,i){s.popupel=n,s.popup=i,s.elems=s.popupel.find("span.wponion-icon-preview");var o=s.popupel.find(".wponion-icon-picker-container-scroll").css("height");s.popupel.find(".wponion-icon-picker-container-scroll").css("height",o),s.select(),s.input(),s.elems.on("click",function(){var n=p(this).attr("data-icon");e.val(n).trigger("change"),swal.closeModal()}),s.init_tooltip()},input:function(){s.popupel.find("div.wponion-icon-picker-model-header input[type=text]").on("keyup",function(){var n=p(this).val();s.elems.each(function(){p(this).attr("data-icon").search(new RegExp(n,"i"))<0?p(this).parent().hide():p(this).parent().show()})})},select:function(){s.popupel.find("div.wponion-icon-picker-model-header select").on("change",function(){swal.enableLoading();var n=p(this).val();r.ajax("icon_picker",{data:{"wponion-icon-lib":n}},function(n){n.success?(swal.resetValidationError(),p(s.popupel).find("#swal2-content").html(n.data).show(),p(s.popupel).find("#swal2-content .wponion-icon-picker-container-scroll").overlayScrollbars({className:"os-theme-dark",resize:"vertical"}),s.init()):(p(s.popupel).find(".wponion-icon-picker-container-scroll").remove(),s.popup.showValidationError(n.data))},function(){s.popup.showValidationError(r.txt("unknown_ajax_error"))},function(){s.popup.disableLoading()})})}};""===e.val()&&(t.hide(),l.hide()),e.on("keyup blur change keypress",function(){var n=p(this).val();""!==n?(l.html('<i class="'+n+'"></i>').show(),t.show()):(l.hide(),t.hide())}),a.on("click",function(){var e=swal({title:i.find(".wponion-field-title h4").html(),animation:!1,allowOutsideClick:!1,showConfirmButton:!1,showCloseButton:!0,width:"700px",customClass:"wponion-icon-picker-model",onBeforeOpen:function(o){swal.enableLoading(),n.ajax("icon_picker",{onSuccess:function(n){if(n.success){swal.resetValidationError();var i=p(o);i.find("#swal2-content").html(n.data).show(),i.find("#swal2-content .wponion-icon-picker-container-scroll").overlayScrollbars({className:"os-theme-dark",resize:"vertical"}),s.init(i,e)}else r.tost({type:"error",title:n.data}),e.showValidationError(n.data)},onError:function(){e.showValidationError(r.txt("unknown_ajax_error"))},onAlways:function(){e.disableLoading()}})}})}),t.on("click",function(){e.val(""),l.hide(),t.hide()})},t.reload=function(){a.addAction("wponion_before_fields_reload");this.elem;this.init_field("input[data-wponion-inputmask]","inputmask"),this.init_field("[data-wponion-maxlength]","maxlength"),this.field_debug(),this.init_field(".wponion-element-icon_picker","icon_picker"),a.addAction("wponion_after_fields_reload")},a.addAction("wponion_before_init",function(){e(".wponion-framework").reload()})}(window,document,jQuery,$wponion,wp);